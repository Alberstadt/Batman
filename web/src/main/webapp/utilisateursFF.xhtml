<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:b="http://bootsfaces.net/ui">

<ui:composition template="/templates/common.xhtml">
	<ui:define name="content">
	<!-- Affiche la liste des utilisateurs afin que l utilisateur selectionnne un et lui envoie une invitation,
					cette liste peut a terme etre remplacee par un champs de recherche d'un user -->
    <h:form style="text-align:center">
		<b:dataTable value="#{contactBean.listeUtilisateurs}"
             var="listeUser"
             id="listeUser"
             fixedHeader="true"
             scroll-size="400px"
             scroll-x="false"
             responsive="true"
             lang="fr"
             searching="false"
             paginated="false"
             info="false"
             style="max-width:800px"
             onselect="ajax:contactBean.onSelect(listeUser);"
             ondeselect="ajax:contactBean.onDeselect(listeUser);"
             select="true"
             selection-mode="single">
             
			 <b:dataTableColumn content-style="height:50px;text-align:center" label="Pseudo" value="#{listeUser.login}" />
			 <b:dataTableColumn content-style="height:50px;text-align:center" orderable="false" label="Portait" ><b:image value="#{listeUser.portrait}"/></b:dataTableColumn>
			 <b:dataTableColumn content-style="height:50px;text-align:center" label="Adresse" value="#{listeUser.mail}" />

		   
		   </b:dataTable>

    
                     <!-- Pour envoyer une demande de food friend 	-->  
			 <p:commandButton value="Envoyer Demande" id="idBtnEnvoiDemande" 
			 actionListener="#{contactBean.envoyerDemandeDeFoodFriend()}" />
			
			<!-- Pour accepter(dans ce cas mise a jour de mes food friends, appel de la methode ou refuser une demande de food friend --> 
			 <p:commandButton value="Dialog" type="button"	onclick="PF('dlg2').show();" />
    
    <div class="ui-fluid">
    <p:dialog header="Ajouter Food-friend" styleClass="ui-priority-primary" widgetVar="dlg2" modal="true" resizable="true" responsive="true">
    
			<div class="form-group row">
				<label for="description" class="control-label col-sm-4"></label>
				<div class="col-sm-8">
					<img src="#{contactBean.photoFf}"/>
				</div>
			</div>
			
			<div class="form-group row">
				<label for="unite" class="control-label col-sm-4"> </label>
				<div class="col-sm-8">
					<h:outputText value="#{listeUser.utilisateur2.login}, #{contactBean.user.login} vous a envoye une demande de food-friend"/>
				</div>
			</div>

			<div class="form-group row">
				<label for="btn" class="control-label col-sm-4"></label>
				<div class="col-sm-8">
					<p:commandButton value="Accepter" id="idBtnAccepter" actionListener="#{contactBean.accepterDemandeDeFoodFriend()}"/>
				<p:commandButton value="Refuser" id="idBtnRefuser"  actionListener="#{contactBean.refuserDemandeDeFoodFriend()}"/> 
				</div>
			</div>
          </p:dialog>
          </div>    	
			  
		</h:form>
	</ui:define>
</ui:composition>
</html>
